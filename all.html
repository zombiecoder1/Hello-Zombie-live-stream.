<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server Monitoring Dashboard</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --bg-color: #0f172a;
            --card-bg: #1e293b;
            --text-color: #f8fafc;
            --border-color: #334155;
        }

        .light-mode {
            --bg-color: #f8fafc;
            --card-bg: #ffffff;
            --text-color: #1e293b;
            --border-color: #e2e8f0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            min-height: 100vh;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: var(--card-bg);
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border-color);
        }

        .header h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-color), var(--success-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .theme-toggle {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border-color);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .servers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
        }

        .server-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .server-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
        }

        .server-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .server-name {
            font-size: 1.2rem;
            font-weight: bold;
        }

        .server-status {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-indicator {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            position: relative;
        }

        .status-active {
            background: conic-gradient(var(--success-color) 0% 100%, transparent 0%);
            animation: rotate 2s linear infinite;
        }

        .status-running {
            background: conic-gradient(var(--primary-color) 0% 100%, transparent 0%);
            animation: blink 1.5s infinite;
        }

        .status-inactive {
            background: var(--danger-color);
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .server-details {
            margin-top: 15px;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid var(--border-color);
        }

        .detail-label {
            color: var(--text-color);
            opacity: 0.7;
        }

        .progress-bar {
            height: 8px;
            background: var(--border-color);
            border-radius: 4px;
            margin-top: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .memory-low {
            background: linear-gradient(90deg, var(--success-color), #84cc16);
        }

        .memory-medium {
            background: linear-gradient(90deg, #84cc16, var(--warning-color));
        }

        .memory-high {
            background: linear-gradient(90deg, var(--warning-color), var(--danger-color));
        }

        .server-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .action-btn {
            flex: 1;
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s ease;
            background: var(--primary-color);
            color: white;
        }

        .action-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        .test-btn {
            background: var(--warning-color);
        }

        .memory-btn {
            background: var(--success-color);
        }

        .test-questions {
            margin-top: 15px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
        }

        .question {
            font-size: 0.9rem;
            margin-bottom: 8px;
            color: var(--text-color);
            opacity: 0.9;
        }

        .last-updated {
            text-align: center;
            margin-top: 30px;
            color: var(--text-color);
            opacity: 0.7;
            font-size: 0.9rem;
        }

        .server-port {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 0.8rem;
            padding: 3px 8px;
            border-radius: 12px;
            background: rgba(0, 0, 0, 0.2);
            color: var(--text-color);
        }

        @media (max-width: 768px) {
            .servers-grid {
                grid-template-columns: 1fr;
            }
            
            .header {
                flex-direction: column;
                gap: 15px;
            }
            
            .controls {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Server Monitoring Dashboard</h1>
            <div class="controls">
                <button class="theme-toggle" id="themeToggle">
                    <span>🌙</span> Toggle Theme
                </button>
            </div>
        </div>
        
        <div class="dashboard-stats">
            <div class="stat-card">
                <div>Total Servers</div>
                <div class="stat-value" id="totalServers">13</div>
                <div>Active: <span id="activeServers">12</span></div>
            </div>
            <div class="stat-card">
                <div>System Memory</div>
                <div class="stat-value" id="systemMemory">78%</div>
                <div>In Use</div>
            </div>
            <div class="stat-card">
                <div>CPU Load</div>
                <div class="stat-value" id="cpuLoad">42%</div>
                <div>Peak: 85%</div>
            </div>
            <div class="stat-card">
                <div>Network</div>
                <div class="stat-value" id="networkSpeed">2.4 Gb/s</div>
                <div>Active Connections</div>
            </div>
        </div>
        
        <div class="servers-grid" id="serversGrid">
            <!-- Server cards will be dynamically generated here -->
        </div>
        
        <div class="last-updated">
            Last Updated: <span id="currentTime"></span>
        </div>
    </div>

    <script>
        // Server configuration with endpoints and test questions
        const servers = [
            {
                id: 'api-gateway',
                name: 'API Gateway',
                port: 3000,
                status: 'running',
                memory: 35,
                uptime: '12d 4h 32m',
                endpoints: ['/health', '/api/status'],
                testQuestions: [
                    'What is the current API throughput?',
                    'How many active connections?'
                ]
            },
            {
                id: 'orchestrator',
                name: 'Orchestrator',
                port: 8001,
                status: 'active',
                memory: 65,
                uptime: '8d 12h 15m',
                endpoints: ['/health', '/api/orchestrate'],
                testQuestions: [
                    'What services are currently orchestrated?',
                    'Any pending tasks in queue?'
                ]
            },
            {
                id: 'bengali-nlp',
                name: 'Bengali NLP',
                port: 8002,
                status: 'active',
                memory: 85,
                uptime: '5d 7h 43m',
                endpoints: ['/health', '/api/generate'],
                testQuestions: [
                    'Can you process Bengali text?',
                    'What NLP models are loaded?'
                ]
            },
            {
                id: 'code-generation',
                name: 'Code Generation',
                port: 8003,
                status: 'running',
                memory: 70,
                uptime: '6d 18h 22m',
                endpoints: ['/health', '/api/generate'],
                testQuestions: [
                    'Generate a Python function for sorting',
                    'Can you create a React component?'
                ]
            },
            {
                id: 'code-review',
                name: 'Code Review',
                port: 8004,
                status: 'active',
                memory: 60,
                uptime: '7d 3h 54m',
                endpoints: ['/health', '/api/review'],
                testQuestions: [
                    'Review this code for best practices',
                    'Check for potential security issues'
                ]
            },
            {
                id: 'documentation',
                name: 'Documentation',
                port: 8005,
                status: 'inactive',
                memory: 40,
                uptime: '9d 2h 11m',
                endpoints: ['/health', '/api/generate'],
                testQuestions: [
                    'Generate documentation for a function',
                    'Create API documentation'
                ]
            },
            {
                id: 'testing',
                name: 'Testing',
                port: 8006,
                status: 'running',
                memory: 25,
                uptime: '4d 9h 38m',
                endpoints: ['/health', '/api/generate'],
                testQuestions: [
                    'Generate unit tests for a function',
                    'Create integration test scenarios'
                ]
            },
            {
                id: 'deployment',
                name: 'Deployment',
                port: 8007,
                status: 'active',
                memory: 50,
                uptime: '10d 14h 27m',
                endpoints: ['/health', '/api/deploy'],
                testQuestions: [
                    'What is the deployment status?',
                    'Any pending deployments?'
                ]
            },
            {
                id: 'file-indexer',
                name: 'File Indexer',
                port: 8010,
                status: 'active',
                memory: 55,
                uptime: '11d 6h 19m',
                endpoints: ['/health', '/api/index'],
                testQuestions: [
                    'How many files are indexed?',
                    'What is the indexing status?'
                ]
            },
            {
                id: 'learning-journal',
                name: 'Learning Journal',
                port: 8011,
                status: 'running',
                memory: 30,
                uptime: '15d 2h 44m',
                endpoints: ['/health', '/api/learn'],
                testQuestions: [
                    'What was learned recently?',
                    'Show learning progress'
                ]
            },
            {
                id: 'notification',
                name: 'Notification',
                port: 8012,
                status: 'active',
                memory: 20,
                uptime: '20d 8h 12m',
                endpoints: ['/health', '/api/notify'],
                testQuestions: [
                    'Send a test notification',
                    'Check notification queue'
                ]
            },
            {
                id: 'session-manager',
                name: 'Session Manager',
                port: 8013,
                status: 'running',
                memory: 35,
                uptime: '18d 5h 33m',
                endpoints: ['/health', '/api/session'],
                testQuestions: [
                    'How many active sessions?',
                    'Check session timeout settings'
                ]
            },
            {
                id: 'voice-processor',
                name: 'Voice Processor',
                port: 8014,
                status: 'inactive',
                memory: 0,
                uptime: '0d 0h 0m',
                endpoints: ['/health', '/api/text-to-speech'],
                testQuestions: [
                    'Convert text to speech',
                    'Check voice processing capabilities'
                ]
            },
            {
                id: 'local-models',
                name: 'Local Models Service',
                port: 5252,
                status: 'active',
                memory: 88,
                uptime: '3d 22h 17m',
                endpoints: ['/health', '/api/models'],
                testQuestions: [
                    'What models are available?',
                    'Check model inference status'
                ]
            }
        ];

        // Theme toggle functionality
        const themeToggle = document.getElementById('themeToggle');
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('light-mode');
            themeToggle.innerHTML = document.body.classList.contains('light-mode') 
                ? '<span>☀️</span> Light Mode' 
                : '<span>🌙</span> Dark Mode';
        });

        // Function to update server cards
        function updateServerCards() {
            const serversGrid = document.getElementById('serversGrid');
            serversGrid.innerHTML = '';

            servers.forEach(server => {
                const card = document.createElement('div');
                card.className = 'server-card';
                card.innerHTML = `
                    <div class="server-port">Port: ${server.port}</div>
                    <div class="server-header">
                        <div class="server-name">${server.name}</div>
                        <div class="server-status">
                            <div class="status-indicator status-${server.status}"></div>
                            <span>${server.status.charAt(0).toUpperCase() + server.status.slice(1)}</span>
                        </div>
                    </div>
                    <div class="server-details">
                        <div class="detail-row">
                            <span class="detail-label">Memory:</span>
                            <span>${server.memory}%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill ${getMemoryClass(server.memory)}" style="width: ${server.memory}%"></div>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Uptime:</span>
                            <span>${server.uptime}</span>
                        </div>
                        <div class="server-actions">
                            <button class="action-btn test-btn" onclick="testPort(${server.port})">Test Port</button>
                            <button class="action-btn memory-btn" onclick="testMemory('${server.id}')">Test Memory</button>
                        </div>
                        <div class="test-questions">
                            <div class="question">${server.testQuestions[0]}</div>
                            <div class="question">${server.testQuestions[1]}</div>
                        </div>
                    </div>
                `;
                serversGrid.appendChild(card);
            });

            updateDashboardStats();
        }

        // Function to get memory class based on usage
        function getMemoryClass(usage) {
            if (usage < 40) return 'memory-low';
            if (usage < 70) return 'memory-medium';
            return 'memory-high';
        }

        // Function to update dashboard statistics
        function updateDashboardStats() {
            const activeServers = servers.filter(s => s.status !== 'inactive').length;
            document.getElementById('activeServers').textContent = activeServers;
            document.getElementById('totalServers').textContent = servers.length;
        }

        // Function to test server port
        function testPort(port) {
            alert(`Testing connection to port ${port}...\nThis would send a real request in production.`);
            // In a real implementation, this would make an actual HTTP request
            // fetch(`http://localhost:${port}/health`)
            //     .then(response => {
            //         if (response.ok) {
            //             alert(`Port ${port} is responding correctly!`);
            //         } else {
            //             alert(`Port ${port} returned status: ${response.status}`);
            //         }
            //     })
            //     .catch(error => {
            //         alert(`Error testing port ${port}: ${error.message}`);
            //     });
        }

        // Function to test server memory
        function testMemory(serverId) {
            const server = servers.find(s => s.id === serverId);
            if (server) {
                // Simulate memory test by slightly increasing memory usage
                const newMemory = Math.min(server.memory + 5, 95);
                server.memory = newMemory;
                
                // Update the UI
                updateServerCards();
                
                alert(`Memory test performed on ${server.name}. Memory usage increased to ${newMemory}%`);
            }
        }

        // Function to update current time
        function updateTime() {
            const now = new Date();
            document.getElementById('currentTime').textContent = now.toLocaleString();
        }

        // Function to simulate dynamic server status changes
        function simulateStatusChanges() {
            // Randomly change some server statuses to simulate real environment
            servers.forEach(server => {
                if (Math.random() < 0.1) { // 10% chance to change status
                    const statuses = ['active', 'running', 'inactive'];
                    const currentIndex = statuses.indexOf(server.status);
                    const newIndex = (currentIndex + 1) % statuses.length;
                    server.status = statuses[newIndex];
                }
                
                // Randomly adjust memory usage slightly
                if (Math.random() < 0.2) { // 20% chance to adjust memory
                    const change = Math.floor(Math.random() * 10) - 5; // -5 to +5
                    server.memory = Math.max(0, Math.min(100, server.memory + change));
                }
            });
            
            updateServerCards();
        }

        // Initialize the dashboard
        updateServerCards();
        updateTime();

        // Update time every second
        setInterval(updateTime, 1000);

        // Simulate status changes every 10 seconds
        setInterval(simulateStatusChanges, 10000);

        // Simulate initial status changes after 2 seconds
        setTimeout(simulateStatusChanges, 2000);
    </script>
</body>
</html>